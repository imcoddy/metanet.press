"use strict";var customSearch;if(!function(l){var s=80,d=l(".l_header");function v(e,t){var a=1<arguments.length&&void 0!==t?t:s,o=e.href?l(decodeURI(e.getAttribute("href"))):l(e);l("html, body").animate({scrollTop:o.offset().top-a},500)}function n(){var t=l(".menu .active"),a=l(".s-top"),o=l("h1.title","#header-meta"),n=l(".safearea");t.length&&n&&t.click(function(e){e.preventDefault(),e.stopPropagation(),"/"!=t.attr("href")&&v(n),e.stopImmediatePropagation(),t.unbind("click")}),o.length&&n&&o.click(function(e){e.preventDefault(),e.stopPropagation(),v(n),e.stopImmediatePropagation(),o.unbind("click")}),a.length&&n&&a.click(function(e){e.preventDefault(),e.stopPropagation(),v(n),e.stopImmediatePropagation()});var e=l(".cover-wrapper"),i=l("#pjax-enable-cover").text(),c=0;e[0]&&"true"==i&&"none"!==l(".cover-wrapper#half").css("display")&&(c=e[0].clientHeight-240);var r=document.body.scrollTop;"true"==i&&"none"===l(".cover-wrapper#half").css("display")&&(r+=240),l(document,window).scroll(function(){var e=l(window).scrollTop();"true"==i&&"none"===l(".cover-wrapper#half").css("display")&&(e+=240);var t=e-r;240<(r=e)?(a.addClass("show"),0<t?a.removeClass("hl"):a.addClass("hl")):a.removeClass("show").removeClass("hl"),-1<e-c?d.addClass("show"):d.removeClass("show")})}function i(){if("true"==l.trim(l("#pjax-ispage").text())&&(window.subData={title:l.trim(l("#pjax-pageTitle").text()),tools:!0}),window.subData){var a=l("header .wrapper"),e=l(".s-comment",a),t=l(".s-toc",a);a.find(".nav-sub .title").text(window.subData.title);var o=document.body.scrollTop;l(document,window).scroll(function(){var e=l(window).scrollTop(),t=e-o;50<=t&&100<e?(o=e,a.addClass("sub")):t<=-50&&(o=e,a.removeClass("sub"))}),l(".l_body .comments").length?e.click(function(e){e.preventDefault(),e.stopPropagation(),v(l(".l_body .comments")),e.stopImmediatePropagation()}):e.remove();var n=l(".l_body .toc-wrapper");n.length&&n.children().length?(t.click(function(e){e.stopPropagation(),n.toggleClass("active"),t.toggleClass("active")}),l(document).click(function(e){e.stopPropagation(),n.removeClass("active"),t.removeClass("active")}),l(document,window).scroll(function(){n.removeClass("active"),t.removeClass("active")})):t.remove()}}function c(){var e=l("body .navigation");e.find("li a.active").removeClass("active"),e.find("div a.active").removeClass("active");var t=null,a=location.pathname.replace(/\/|%|\./g,"");0==a.length&&(a="home");var o=a.match(/page\d{0,}$/g);o&&(o=o[0],a=a.split(o)[0]);var n,i=a.match(/index.html/);i&&(i=i[0],a=a.split(i)[0]),a&&e&&(t=l("#"+a,e),(n=t)&&n.length&&n.addClass("active").siblings().removeClass("active"))}function r(){l(document).click(function(e){l(".m-phone .list-v").hide()}),l(window).scroll(function(){l(".m-phone .list-v").hide()})}function h(){var a=l(".toc-wrapper");if(0!==a.length){a.click(function(e){e.stopPropagation(),a.addClass("active")}),l(document).click(function(){return a.removeClass("active")}),a.on("click","a",function(e){e.preventDefault(),e.stopPropagation(),"A"===e.target.tagName?v(e.target,0):"SPAN"===e.target.tagName&&v(e.target.parentElement,0),a.removeClass("active");var t=l(".s-toc");0<t.length&&t.removeClass("active")});var n=Array.from(a.find("li a")),i=function(){return n.map(function(e){return Math.floor(l(decodeURI(e.getAttribute("href"))).offset().top-s)})},c=i(),r=l(document).height(),e=function(){var e=l("html").scrollTop()||l("body").scrollTop();if(l(document).height()!=r&&(e=l("html").scrollTop()||l("body").scrollTop(),r=l(document).height(),c=i()),c){for(var t=0,a=c.length-1,o=void 0;t<a;)c[o=t+a+1>>1]===e?t=a=o:c[o]<e?t=o:a=o-1;l(n).removeClass("active").eq(t).addClass("active")}};l(window).scroll(function(){e()});var t=null;l(window).bind("resize",function(){t&&clearTimeout(t),t=setTimeout(function(){c=i(),e()},100)}),e()}}function p(){var e=l(".tabs");if(0!==e.length){for(var t=e.find(".nav-tabs .tab"),a=0;a<t.length;a++){var o=e.find(t[a].children[0]);o.addClass(o.attr("href")),o.removeAttr("href")}l(".tabs .nav-tabs").on("click","a",function(e){e.preventDefault(),e.stopPropagation();var t=l(e.target.parentElement.parentElement.parentElement);return t.find(".nav-tabs .active").removeClass("active"),t.find(e.target.parentElement).addClass("active"),t.find(".tab-content .active").removeClass("active"),t.find(l(e.target).attr("class")).addClass("active"),!1})}}d[0]&&(s=d[0].clientHeight+16),l(function(){var t,a,o,e;i(),c(),l(".m-pc li > a[href]").parent().click(function(e){e.stopPropagation(),l(".m-pc .list-v").hide()}),l(".m-phone li").click(function(e){e.stopPropagation(),l(l(e.currentTarget).children("ul")).show()}),r(),t=l(".l_header .switcher .s-search"),a=l(".l_header"),o=l(".l_header .m_search"),0!==t.length&&(t.click(function(e){e.stopPropagation(),a.toggleClass("z_search-open"),t.toggleClass("active"),o.find("input").focus()}),l(document).click(function(e){a.removeClass("z_search-open"),t.removeClass("active")}),o.click(function(e){e.stopPropagation()}),a.ready(function(){a.bind("keydown",function(e){if(9==e.keyCode)return!1;var t,a,o=!!document.all;a=o?(t=window.event.keyCode,window.event):(t=e.which,e),9==t&&(o?(a.keyCode=0,a.returnValue=!1):(a.which=0,a.preventDefault()))})})),h(),n(),e="https://cdn.jsdelivr.net/gh/volantis-x/cdn-volantis@master/img/","google"===SEARCH_SERVICE?customSearch=new GoogleCustomSearch({apiKey:GOOGLE_CUSTOM_SEARCH_API_KEY,engineId:GOOGLE_CUSTOM_SEARCH_ENGINE_ID,imagePath:e}):"algolia"===SEARCH_SERVICE?customSearch=new AlgoliaSearch({apiKey:ALGOLIA_API_KEY,appId:ALGOLIA_APP_ID,indexName:ALGOLIA_INDEX_NAME,imagePath:e}):"hexo"===SEARCH_SERVICE?customSearch=new HexoSearch({imagePath:e}):"azure"===SEARCH_SERVICE?customSearch=new AzureSearch({serviceName:AZURE_SERVICE_NAME,indexName:AZURE_INDEX_NAME,queryKey:AZURE_QUERY_KEY,imagePath:e}):"baidu"===SEARCH_SERVICE&&(customSearch=new BaiduSearch({apiId:BAIDU_API_ID,imagePath:e})),p(),l(".scroll-down").on("click",function(){v(".safearea")});try{document.addEventListener("pjax:complete",function(){l(function(){s=80,(d=l(".l_header"))[0]&&(s=d[0].clientHeight+16),i(),c(),r(),h(),n(),p();var t=l(".l_header .switcher .s-search"),a=l(".l_header");0!==t.length&&l(document).click(function(e){a.removeClass("z_search-open"),t.removeClass("active")})})})}catch(e){}})}(jQuery),window.location.hash)var checkExist=setInterval(function(){"undefined"!=typeof jQuery&&$("#"+decodeURI(window.location.hash.split("#")[1]).replace(/\ /g,"-")).length&&($("html, body").animate({scrollTop:$("#"+decodeURI(window.location.hash.split("#")[1]).replace(/\ /g,"-")).offset().top-40},500),clearInterval(checkExist))},100);